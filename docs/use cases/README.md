# Модель прецедентів

## 1. Діаграма прецедентів

#### На **мал. 1** зображена ієрархія прецедентів та її основні можливості.

<center>

@startuml

    skinparam noteFontColor white

    actor "Користувач" as User 
  
    usecase "<b>Sign-up</b>\n Створити обліковий запис" as Signup
    usecase "<b>Login</b>\n Ввійти в обліковий запис" as Login  
  
    User -l-> Login
    User -r-> Signup

    actor "Експерт" as Expert

    usecase "<b>Take a survey</b>\n Пройти опитування" as TS
    usecase "<b>Get a list of questions</b>\n Отримати список питань" as GQ

    Expert -u-|> User
    Expert -d-> TS
    Expert -d-> GQ

    actor "Клієнт" as Client

    usecase "<b>Survey management</b>\n Управління опитуваннями" as SM

    Client -u-|> User
    Client -d-> SM

@enduml

**Мал. 1** Ієрархія прецедентів.

</center>

Існує 3 типи користувачів: **Користувач**, тобто неавтентифікований користвувач та **Клієнт**, тобто авторизований користувач, який може працювати з опитуваннями та **Експерт**, тобто авторизований користувач, який може проходити опитування.

## 2. Схема використання для **Користувача**

#### На **мал. 2** зображені усі можливості користувача **користувач**.

<center>

@startuml

    skinparam noteFontColor white

    actor "Користувач" as User 
  
    usecase "<b>Sign-up</b>\n Створити обліковий запис" as Signup
    usecase "<b>Login</b>\n Ввійти в обліковий запис" as Login 

    usecase "Відновити пароль" as RP
    usecase "Зареєструватись за домогою\n пошти" as MA
  
    User -l-> Login
    User -r-> Signup

    Signup <.u. RP:extends
    Login <.u. MA:extends

@enduml

**Мал. 2** Усі можливості неавтентифікованого користувача.  

</center>

## 3. Схема використання для **Експерта**

#### На **мал. 3** зображені усі можливості користувача **Експерт**.

<center>

@startuml

    skinparam noteFontColor white

    actor "Експерт" as Expert

    usecase "<b>Take a survey</b>\n Пройти опитування" as TS
    usecase "<b>Get a list of questions</b>\n Отримати список питань" as GQ

    Expert -d-> TS
    Expert -d-> GQ

@enduml

**Мал. 3** Усі можливості експерта.

</center>

## 4. Схема використання для **Клієнта**

#### На **мал. 4** зображені усі можливості користувача **Клієнт**.

<center>

@startuml

    skinparam noteFontColor white

    actor "Клієнт" as Client

    usecase "<b>Survey management</b>\nУправління опитуваннями" as SM

    usecase "<b>Create a survey</b>\nСтворити опитування" as CS #lightgreen
    usecase "<b>Make changes to the survey</b>\nВнести зміни до опитування" as MCS #lightgreen 
    usecase "<b>Delete survey</b>\nВидалити опитування" as DS #lightgreen
    usecase "<b>Get survey results</b>\nОтримати результати опитування" as GSR #lightgreen

    usecase "Відформатувати результати" as Form
    usecase "Аналіз результатів" as An
    usecase "Налаштувати категорії експертів" as Acc
    
    Client -d-> SM

    SM <-d- CS 
    SM <-d- MCS 
    SM <-d- DS 
    SM <-d- GSR

    CS <.d. Acc:include
    GSR <.d. Form:extends
    GSR <.d. An:extends

@enduml

**Мал. 4** Усі можливості клієнта.

</center>

## 5. Сценарії використання для незареєстрованого користувача

#### 1) ***ID ПРОЦЕСУ:*** USER__SIGN_UP
        
***НАЗВА:*** Створити обліковий запис
        
***УЧАСНИКИ:*** Система, користувач
    
***ПЕРЕДУМОВИ:*** Користувач перейшов на сторінку, але не має облікового запису
    
***РЕЗУЛЬТАТ:*** Створено акаунт для користувача
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Відміна реєстрації, акаунт вже існує, користувач вводить неправильні дані.
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Користувач робить запит на реєстрацію.
2. Система надає форму для заповнення (пошта, пароль, ім'я, вік, генедер).
3. Користувач вводить дані та уточнює свою роль (клієнт чи експерт).
4. Система заносить користувача в базу даних.
5. Система створює акаунт користувача.
6. Система перенаправляє користувача на форму входу в акаунт.

<center>

@startuml

  |Користувач|
  start
  : Натискає на кнопку "Реєстрація";

  |Система|
  : Отримує запит;
  : Надсилає форму для заповнення;

  |Користувач|
  : Вводить реєстраційні дані;
  : Натискає кнопку "Зареєструватися";

  |Система|
  : Перевіряє отримані дані і наявність облікового запису користувача;
    note right #lightpink
      <b>Можливі виключні ситуації</b>
      <b>"Хибні дані" "Акаунт вже створено"</b>
    end note
  : Додає дані користувача в базу даних;
  : Відправляє повідомлення про успіх;

  |Користувач|
  : Отримує повідомлення про успішну реєстрацію;
  stop

@enduml

**Мал. 5.1** Сценарій реєстрації користувача.

</center>

#### 2) ***ID ПРОЦЕСУ:*** USER__SIGN_IN
        
***НАЗВА:*** Ввійти в обліковий запис
        
***УЧАСНИКИ:*** Система, користувач
    
***ПЕРЕДУМОВИ:*** Авторизований користувач перейшов на сторінку
    
***РЕЗУЛЬТАТ:*** Користувачу наданий доступ до акаунту 
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Користувач вводить неправильні дані, відміна входу
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Користувач вводить дані.
2. Система обробляє дані.
3. Система надає користувачу доступ до акаунту.

<center>

@startuml

  |Користувач|
  start
  : Натискає на кнопку "Вхід";
  : Вводить дані: логін та пароль;
  : Натискає на кнопку "Увійти";


  |Система|
  : Отримує запит;
  : Перевіряє отримані автентифікаційні дані;
    note right #lightpink
      <b>Можлива виключна ситуація</b>
      <b>"Хибні дані"</b>
    end note
  : Надає користувачу доступ до його особистого кабінету;

  |Користувач|
  : Отримує повідомлення про успішний вхід у особистий кабінет;
  stop

@enduml

**Мал. 5.2** Сценарій входу користувача у свій обліковий запис.

</center>

## 6. Сценарії використання для клієнта
#### 1) ***ID ПРОЦЕСУ:*** CLIENT__POST_POLL
        
***НАЗВА:*** Створити опитування
        
***УЧАСНИКИ:*** Клієнт, система
    
***ПЕРЕДУМОВИ:*** Авторизований клієнт знаходиться на сторінці акаунту
    
***РЕЗУЛЬТАТ:*** Створене опитування
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Клієнт ввів дані неправильно.
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Клієнт переходить на сторінку, щоб створити опитування.
2. Клієнт створює форму для опитування.
3. Клієнт обирає категорії експертів, які його цікавлять та надсилає форму.
4. Система отримує та зберігає дані від клієнта.
5. Клієнту надсилається повідомлення про успішно створене опитування.

<center>

@startuml

  |Клієнт|
  start
  : Переходить на сторінку створення опитування; 
  : Натискає на кнопку "Створити опитування";
  : Уводить питання;
  : Натискає на кнопку "Створити";

  |Система|
  : Отримує запит;

  note right #lightpink
    <b>Можлива виключна ситуація</b>
    <b>"Клієнт ввів дані неправильно"</b>
  end note
  
  : Додає дані користувача в базу даних;
  : Надисилає клієнту повідомлення про успішне створення опитування;

  |Клієнт|
  : Отримує повідомлення про успішне створення опитування;
  stop

@enduml

**Мал. 6.1** Сценарій створення клієнтом опитування.

</center>

#### 2) ***ID ПРОЦЕСУ:*** CLIENT__PATCH_POLL
        
***НАЗВА:*** Внести зміни до опитування
        
***УЧАСНИКИ:*** Клієнт, система
    
***ПЕРЕДУМОВИ:*** Авторизований клієнт знаходиться на сторінці свого акаунту
    
***РЕЗУЛЬТАТ:*** Змінене опитування
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Клієнт ввів дані неправильно 
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Клієнт переходить на сторінку для внесення змін.
2. Клієнт робить зміни.
3. Клієнт підтверджує бажання змінити форму.
4. Система вносить зміни до бази даних.

<center>

@startuml

  |Клієнт|
  start
  : Переходить на сторінку створення опитування; 
  : Натискає на кнопку "Редагувати опитування";
  : Уводить зміни в опитуванні;
  : Натискає на кнопку "Зберегти зміни";


  |Система|
  : Отримує запит;

  note right #lightpink
    <b>Можлива виключна ситуація</b>
    <b>"Клієнт ввів дані неправильно"</b>
  end note

  : Додає дані користувача в базу даних;
  : Повертає оновлені дані опитування;

  |Клієнт|
  : Отримує оновлене опитування;
  stop

@enduml

**Мал. 6.2** Сценарій редагування клієнтом опитування.

</center>

#### 3) ***ID ПРОЦЕСУ:*** CLIENT__DELETE_POLL
        
***НАЗВА:*** Видалити опитування
        
***УЧАСНИКИ:*** Клієнт, система
    
***ПЕРЕДУМОВИ:*** Авторизований клієнт знаходиться на сторінці акаунту, опитування створене
    
***РЕЗУЛЬТАТ:*** Видалене опитування
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Відсутні
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Клієнт переходить на сторінку опитування.
2. Клієнт робить запит на видалення опитування.
3. Клієнт підтверджує бажання видалити форму.
4. Система видаляє опитування з бази даних.

<center>

@startuml

  |Клієнт|
  start
  : Переходить на сторінку зі створеними опитуваннями; 
  : Натискає на кнопку "Видалити опитування";
  : Натискає на кнопку "Підтверджую";

  |Система|
  : Отримує запит;
  : Видаляє опитування з бази даних;
  : Повертає повідомлення про успіх;

  |Клієнт|
  : Отримує повідомлення про успішне видалення опитування;
  stop

@enduml

**Мал. 6.3** Сценарій видалення клієнтом опитування.

</center>

#### 4) ***ID ПРОЦЕСУ:*** CLIENT__GET_RESPONSES
        
***НАЗВА:*** Отримати результати опитування
        
***УЧАСНИКИ:*** Клієнт, система
    
***ПЕРЕДУМОВИ:*** Опитування створене, авторизований клієнт знаходиться на сторінці свого акаунту
    
***РЕЗУЛЬТАТ:*** Клієнт отримує дані щодо опитування
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Опитування з таким id не знайдено, опитування ніхто не пройшов
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Клієнт обирає в акаунті, статистика з якого опитування його цікавить.
2. Клієнт робить запит на отримання результатів опитування.
3. Клієнт переглядає результати та статистику.

<center>

@startuml

  |Клієнт|
  start
  : Переходить на сторінку статистики;
  : Робить запит на отримання результатів опитування;
  
  |Система|
  : Отримує запит;
  : Надає користувачу результати опитування;

  note right #lightpink
    <b>Можлива виключна ситуація</b>
    <b>"Опитування ніхто не пройшов"</b>
  end note

  |Клієнт|
  : Отримує результати опитування;
  stop

@enduml

**Мал. 6.4** Сценарій отримання клієнтом результатів опитування.

</center>

## 7. Сценарії використання для експерта

#### 1) ***ID ПРОЦЕСУ:*** EXPERT__POST_RESPONSE
        
***НАЗВА:*** Пройти опитування
        
***УЧАСНИКИ:*** Система, експерт
    
***ПЕРЕДУМОВИ:*** Експерт бажає пройти опитування
    
***РЕЗУЛЬТАТ:*** Результати опитування надіслано до бази даних
    
***ВИКЛЮЧНІ СИТУАЦІЇ:*** Неправильно введені дані
    
***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Авторизований експерт переходить на сторінку з опитуваннями.
2. Експерт проходить опитування та надсилає заповнену форму.
3. Система перевіряє дані від експерта.
4. Система зберігає дані від експерта.
5. Експерт отримує невелику суму за пройдене опитування

<center>

@startuml

  |Експерт|
  start
  : Отримує всі можливі опитування;
  : Натискає на кнопку "Пройти опитування";

  |Система|
  :Обробляє запит;
  :Надає опитування;

  |Експерт|
  : Заповнює форму опитування;
  : Натискає на кнопку "Відправити";

  |Система|
  : Перевіряє отримані дані;

  note right #lightpink
    <b>Можлива виключна ситуація</b>
    <b>"Неправильно введені дані"</b>
  end note

  : Зберігає відповідь користувача;
  : Відправляє повідомлення про пройдене опитування;

  |Експерт|
  : Отримує інформацію про проходження опитування;
  stop

@enduml

**Мал. 7.1** Сценарій проходження експертом опитування.

</center>

#### 2) ***ID ПРОЦЕСУ:*** EXPERT__GET_POLLS

***НАЗВА:*** Отримати список питань

***УЧАСНИКИ:*** Експерт, система

***ПЕРЕДУМОВИ:*** Під дані клієнта існують питання, авторизований експерт знаходиться на сторінці свого акаунту

***РЕЗУЛЬТАТ:*** Клієнт отримує список питань

***ВИКЛЮЧНІ СИТУАЦІЇ:*** Відсутні

***ОСНОВНИЙ СЦЕНАРІЙ:***
1. Експерт переходить на сторінку з опитуваннями.
2. Експерт робить запит на отримання опитувань під його дані.
3. Експерту відображається список можливих опитувань

<center>

@startuml

  |Експерт|
  start
  : Переходить на сторінку з опитуваннями;
  : Робить запит на отримання опитувань під його дані;

  |Система|
  : Обробляє запит;
  : Надає список можливих опитувань;

  |Експерт|
  : Отримує список питань;
  stop

@enduml

**Мал. 7.2** Сценарій отримання експертом списка питань.

</center>
